<mvc:View
    controllerName="lojacap.controller.configuracao-iss"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:util="lojacap.controller.formatter">

     <Page id="pageConfiguracoesISS" showHeader="false" title="Configurações de ISS">
                <Toolbar id="toolbarCabecalhoTopoISS" class="cabecalhoTopo">
            <HBox id="hboxCabecalhoISS" width="100%" alignItems="Center" justifyContent="SpaceBetween">
                <HBox id="hboxEsquerdaISS" alignItems="Center">
                    <Button id="btnVoltarTopoISS"
                            icon="sap-icon://nav-back"
                            type="Transparent"
                            tooltip="Voltar"/>
                    <Image id="logoTopoISS"
                          src="https://upload.wikimedia.org/wikipedia/commons/5/59/SAP_2011_logo.svg"
                          height="2rem"
                          width="auto"
                          class="sapUiTinyMarginBegin" />
                </HBox>
                <HBox id="hboxCentroISS" width="100%" justifyContent="Center">
                    <Text id="tituloCabecalhoISS"
                          text="GBLOG - Plataforma Logística - Configuração de ISS"
                          class="cabecalhoTexto" />
                </HBox>
                <HBox id="hboxDireitaISS" width="2rem" />
            </HBox>
        </Toolbar>
        <content>
                 <Button
                    id="btnNovoRegistro"
                    icon="sap-icon://add"
                    text="Novo Registro"
                    press=".onOpenDialog"
                    class="sapUiTinyMarginBegin" />
            <Table
                id="tblConfiguracoes"
                inset="false"
                items="{
                    path: '/ConfiguracoesISS',
                    parameters: {
                        $select: '*',
                        $expand: 'empresa'
                    },
                    sorter: { path: 'createdAt', descending: true }
                }">
                <columns>
                    <Column id="colMandt" minScreenWidth="Desktop"><Text id="colHdrMandt" text="Mandante" /></Column>
                    <Column id="colEmpresa"><Text id="colHdrEmpresa" text="Empresa" /></Column>
                    <Column id="colLocNeg" minScreenWidth="Tablet"><Text id="colHdrLocNeg" text="Local de Negócios" /></Column>
                    <Column id="colLocFornec" minScreenWidth="Desktop"><Text id="colHdrLocFornec" text="Local do Fornecedor" /></Column>
                    <Column id="colServPrest" minScreenWidth="Desktop"><Text id="colHdrServPrest" text="Serviço Prestado" /></Column>
                    <Column id="colVerif" hAlign="Center"><Text id="colHdrVerif" text="Aplicável?" /></Column>
                    <Column id="colValDe" hAlign="End"><Text id="colHdrValDe" text="Válido De" /></Column>
                    <Column id="colValAte" hAlign="End"><Text id="colHdrValAte" text="Válido Até" /></Column>
                </columns>
                <items>
                    <ColumnListItem id="itemConfiguracao" type="Navigation" press=".onOpenDialog">
                        <cells>
                            <Text id="cellTxtMandt" text="{mandt}" />
                            <Text id="cellTxtEmpresa" text="{empresa/nome}" />
                            <Text id="cellTxtLocNeg" text="{loc_neg}" />
                            <Text id="cellTxtLocFornec" text="{loc_fornec}" />
                            <Text id="cellTxtServPrest" text="{serv_prest}" />
                            <core:Icon
                                id="cellIconVerif"
                                src="{= ${verif} === 'X' ? 'sap-icon://accept' : 'sap-icon://decline' }"
                                color="{= ${verif} === 'X' ? 'Positive' : 'Negative' }"
                                tooltip="{= ${verif} === 'X' ? 'Sim' : 'Não' }" />
                            <Text id="cellTxtValDe" text="{path: 'val_de', formatter: '.formatter.formatDate'}" />
                            <Text id="cellTxtValAte" text="{path: 'val_ate', formatter: '.formatter.formatDate'}" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>